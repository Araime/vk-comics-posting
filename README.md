# Публикация комиксов

Программа для постинга комисков [xkcd](https://xkcd.com/), Рэндела Манро, в своей 
группе во Вконтакте. При запуске программа выбирает случайный комикс, скачивает 
изображение и комментарий к нему. После чего постит на стене вашей группы во 
Вконтакте вместе с комментарием. Изображение после постинга удаляется с компьютера.

### Как установить

#### Скачать

Python3 должен быть уже установлен. Скачать этот репозиторий себе на компьютер.

Рекомендуется использовать [virtualenv/venv](https://docs.python.org/3/library/venv.html)
для изоляции проекта.

#### Быстрая настройка venv

Начиная с Python версии 3.3 виртуальное окружение идёт в комплекте в виде модуля
venv. Чтобы его установить и активировать нужно выполнить следующие действия в
командной строке:  

Указать скачанный репозиторий в качестве каталога.
```
cd C:\Users\ваш_пользователь\Downloads\папка_репозитория
```
Установить виртуальное окружение в выбранном каталоге.
```
Python -m venv env
```
В репозитории появится папка виртуального окружения env  

<a href="https://imgbb.com/"><img src="https://i.ibb.co/Hn4C6PD/image.png" alt="image" border="0"></a>

Активировать виртуальное окружение.
```
env\scripts\activate
```
Если всё сделано правильно, вы увидите в командной строке (env) слева от пути 
каталога.  

<a href="https://imgbb.com/"><img src="https://i.ibb.co/MZ72r22/2.png" alt="2" border="0"></a>

#### Установить зависимости

Используйте `pip` (или `pip3`, есть конфликт с Python2) для установки 
зависимостей:

```sh
pip install -r requirements.txt
```

#### Создать группу во Вконтакте

Если у вас не создана группа - создайте. Во вкладке [группы](https://vk.com/groups?tab=admin),
она появится в разделе "управление":  

<a href="https://imgbb.com/"><img src="https://i.ibb.co/PgcTLFr/2.png" alt="2" border="0"></a>  

#### Получить необходимые данные для работы с Вконтакте

На [странице разработчика](https://vk.com/dev) выберите в шапке раздел "мои 
приложения":  

<a href="https://ibb.co/CKwv8cx"><img src="https://i.ibb.co/1G0KQgH/2.png" alt="2" border="0"></a>  

Нажмите "создать". В качестве типа приложения следует указать `standalone` — 
это подходящий тип для приложений, которые просто запускаются на компьютере.
Если нажать на кнопку “Редактировать” для нового приложения, в адресной строке 
вы увидите его `client_id`, например:
```sh
https://vk.com/editapp?id={ваш cliend_id}
```
Чтобы получить access_token для работы с Вконтакте, скопируйте ссылку ниже, указав
свой `client_id`, в адресную строку браузера.
```
https://oauth.vk.com/authorize?client_id={ваш cliend_id}&display=page&&scope=photos,groups,wall,offline&response_type=token&v=5.131&state=123456
```
В ответ вы увидите запрос разрешений, как на скриншоте:  

<a href="https://ibb.co/54N2Rw0"><img src="https://i.ibb.co/C8kWHDc/test.png" alt="test" border="0"></a>

Нажав "разрешить", вы сразу же получите ответ от сервера, в адресной строке вашего
браузера(скопируйте только access_token):  

<a href="https://ibb.co/ZdzWsrs"><img src="https://i.ibb.co/MnkMTHT/2.png" alt="2" border="0"></a>  
 
По [ссылке](https://regvk.com/id/) узнайте `id` вашей группы и скопируйте его.


Создайте в корне репозитория файл `.env` и добавьте в него следующие строки:
```sh
VK_ACCESS_TOKEN=Ваш access_token
VK_GROUP_ID=Ваш group_id
```

### Как запустить

В командной строке указываем главный файл:
```sh
python main.py
```

Постинг успешно произведен:  

<a href="https://imgbb.com/"><img src="https://i.ibb.co/1r8zg8p/2.png" alt="2" border="0"></a>

### Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).